import 'package:cloud_firestore/cloud_firestore.dart';import 'package:myapp/core/models/user_profile_model.dart';
class FirestoreService{final FirebaseFirestore _db=FirebaseFirestore.instance;CollectionReference<UserProfile>get _usersRef=>_db.collection('users').withConverter<UserProfile>(fromFirestore:(snapshots,_)=>UserProfile.fromFirestore(snapshots),toFirestore:(userProfile,_)=>userProfile.toFirestore());Future<UserProfile?>getUserProfile(String uid)async{final docSnapshot=await _usersRef.doc(uid).get();return docSnapshot.data();}Future<void>setUserProfile({required String uid,required String nickname,required String email})async{final userProfile=UserProfile(uid:uid,nickname:nickname,email:email);await _usersRef.doc(uid).set(userProfile,SetOptions(merge:true));}}
