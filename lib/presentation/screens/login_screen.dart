import 'package:flutter/material.dart';import 'package:provider/provider.dart';import 'package:myapp/core/providers/auth_provider.dart';
class LoginScreen extends StatefulWidget{const LoginScreen({super.key});@override State<LoginScreen>createState()=>_LoginScreenState();}
class _LoginScreenState extends State<LoginScreen>{final TextEditingController _nicknameController=TextEditingController();Future<void>_login()async{final authProvider=context.read<AuthProvider>();final nickname=_nicknameController.text;if(nickname.isEmpty){ScaffoldMessenger.of(context).showSnackBar(const SnackBar(content:Text('Por favor, insira um apelido.')));return;}bool success=await authProvider.signIn(nickname);if(!success&&mounted){ScaffoldMessenger.of(context).showSnackBar(const SnackBar(content:Text('Erro ao fazer login. Tente novamente.')));}}@override Widget build(BuildContext context){final authStatus=context.watch<AuthProvider>().status;return Scaffold(body:Center(child:SingleChildScrollView(padding:const EdgeInsets.all(24.0),child:Column(mainAxisAlignment:MainAxisAlignment.center,crossAxisAlignment:CrossAxisAlignment.stretch,children:[const Text('Duelo Metabólico',textAlign:TextAlign.center,style:TextStyle(fontSize:32,fontWeight:FontWeight.bold,color:Colors.white)),const SizedBox(height:10),const Text('A plataforma para mestres da nutrição',textAlign:TextAlign.center,style:TextStyle(fontSize:16,color:Colors.white70)),const SizedBox(height:40),TextField(controller:_nicknameController,style:const TextStyle(color:Colors.white),decoration:const InputDecoration(hintText:'Seu Apelido de Nutri',prefixIcon:Icon(Icons.person,color:Colors.white54)),onSubmitted:authStatus==AuthStatus.authenticating?null:(_)=>_login()),const SizedBox(height:20),ElevatedButton(onPressed:authStatus==AuthStatus.authenticating?null:_login,child:authStatus==AuthStatus.authenticating?const SizedBox(height:20,width:20,child:CircularProgressIndicator(color:Colors.white,strokeWidth:2.0)):const Text('Entrar na Arena'))]))));}}
